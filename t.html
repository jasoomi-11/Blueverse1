<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Games ‚Äî Grid</title>
<style>
/* ================= GLOBAL (dark blue / black theme) ================= */
:root{
  --bg-1:#00040f;
  --bg-2:#001428;
  --card:#0f1620;
  --accent:#00eaff; /* accent for icons and highlights */
  --muted:#9aa9bb;
  --glass: rgba(255,255,255,0.03);
  --glass-strong: rgba(255,255,255,0.06);
}
*{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{
  min-height:100vh;
  font-family: "Segoe UI", Roboto, system-ui, -apple-system, "Helvetica Neue", Arial;
  background: linear-gradient(180deg,var(--bg-1),var(--bg-2));
  color: #fff;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* ================ Header (kept same structure) ================= */
header {
  position: fixed;
  top: 1rem;
  left: 50%;
  transform: translateX(-50%) scale(0.98);
  width: 90%;
  max-width: 1100px;
  height: 70px;
  background: rgba(10,10,12,0.55);
  border-radius: 999px;
  backdrop-filter: blur(10px);
  box-shadow: 0 6px 30px rgba(0,0,0,0.6);
  display: flex;
  align-items: center;
  justify-content: space-between;
  transition: all 0.6s cubic-bezier(.2,.9,.2,1);
  z-index: 1000;
  padding: 0 1.2rem;
}
header.show { opacity: 1; transform: translateX(-50%) scale(1); }

/* Logo left ‚Äî same markup as you had */
.logo {
  font-size: 1.2rem;
  font-weight: 700;
  color: var(--accent);
  background: rgba(255,255,255,0.02);
  border-radius: 50%;
  width: 55px;
  height: 55px;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  flex-shrink: 0;
  box-shadow: 0 4px 18px rgba(0,0,0,0.6);
}
.logo img{ width:100%; height:100%; object-fit:cover; display:block; }

/* Hamburger (right) */
.hamburger {
  width: 34px;
  height: 22px;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  cursor:pointer;
  flex-shrink:0;
}
.hamburger span{
  display:block;
  height:3px;
  width:100%;
  background: #c7d7e6;
  border-radius:3px;
  transition: all .28s ease;
}
.hamburger.active span:nth-child(1){ transform: rotate(45deg) translate(5px,6px); background:#fff; }
.hamburger.active span:nth-child(2){ opacity:0; transform: translateX(-10px); }
.hamburger.active span:nth-child(3){ transform: rotate(-45deg) translate(4px,-6px); background:#fff; }

/* ================= Sidebar menu (functional) ================= */
.menu {
  position: fixed;
  top: 0;
  left: -280px;
  width: 280px;
  height: 100%;
  background: linear-gradient(180deg,#05060a, #071026);
  backdrop-filter: blur(8px);
  padding: 84px 18px 18px;
  display:flex;
  flex-direction:column;
  gap:10px;
  transition:left .32s ease;
  z-index: 1100;
  border-right: 1px solid rgba(255,255,255,0.03);
}
.menu.active { left: 0; }

.menu a{
  display:block;
  color:var(--muted);
  text-decoration:none;
  padding:10px 12px;
  border-radius:10px;
  font-weight:600;
}
.menu a:hover{ background: rgba(255,255,255,0.02); color:#fff; transform:translateX(4px); }

/* overlay */
.overlay {
  position: fixed; inset:0;
  background: rgba(0,0,0,0.5);
  opacity:0; pointer-events:none;
  transition:opacity .24s ease;
  z-index:1050;
}
.overlay.show{ opacity:1; pointer-events:auto; }

/* ================= Main content container ================= */
.container {
  max-width:1100px;
  margin:160px auto 80px; /* push below fixed header; extra for hero */
  padding: 0 16px;
}

/* HERO section */
.hero {
  display:flex;
  gap:16px;
  align-items:center;
  justify-content:space-between;
  background: linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
  border-radius: 10px;
  padding: 18px;
  margin-bottom: 12px;
}
.hero-left { max-width:72%; }
.hero h1 { font-size: 1.6rem; color: #dbe9f7; margin-bottom:6px; }
.hero p { color: var(--muted); font-size: 0.95rem; margin-bottom:8px; }
.hero-meta { color:var(--muted); font-size:13px; }

/* hero image (small poster) */
.hero img { width:120px; height:72px; object-fit:cover; border-radius:8px; border:1px solid rgba(255,255,255,0.03); }

/* ================ FILTERS (Option C: pills desktop, dropdown mobile) =============== */
.filters-wrap{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin:12px 0 16px;
  flex-wrap:wrap;
}
.filter-pills{
  display:flex;
  gap:8px;
  align-items:center;
  overflow:auto;
  padding-bottom:6px;
}
.pill{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:6px 10px;
  border-radius:999px;
  background:transparent;
  color:var(--muted);
  border:1px solid rgba(255,255,255,0.03);
  font-weight:600;
  cursor:pointer;
  white-space:nowrap;
  transition: all .16s ease;
}
.pill:hover{ transform:translateY(-2px); color:#fff; border-color:rgba(255,255,255,0.06); }
.pill.active{
  background: var(--accent);
  color: #001;
  box-shadow: 0 6px 18px rgba(0,0,0,0.6);
  border-color: transparent;
}

/* mobile dropdown (hidden on desktop) */
.filter-select{
  display:none;
  padding:8px 10px;
  border-radius:8px;
  background:var(--glass);
  color:#fff;
  border:1px solid rgba(255,255,255,0.03);
}
@media (max-width:640px){
  .filter-pills{ display:none; }
  .filter-select{ display:block; }
  .filters-wrap{ gap:8px; }
}

/* ================ Grid: square small cards ================= */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 12px;
}

/* MOBILE: exactly 2 cards per row */
@media (max-width:480px){
  .grid { grid-template-columns: repeat(2, 1fr); gap:8px; }
}

/* card keeps square aspect ratio */
.card {
  position: relative;
  width: 100%;
  aspect-ratio: 1/1;
  border-radius: 10px;
  overflow: hidden;
  background: var(--card);
  border: 1px solid rgba(255,255,255,0.02);
  box-shadow: 0 6px 18px rgba(0,0,0,0.6);
  transition: transform .16s ease, box-shadow .16s ease, opacity .16s ease;
  will-change: transform, opacity;
}
.card:hover{
  transform: translateY(-6px);
  box-shadow: 0 14px 32px rgba(0,0,0,0.7);
}

/* thumbnail image fill */
.card img.thumb {
  position:absolute; inset:0; width:100%; height:100%; object-fit:cover; display:block;
  filter: saturate(0.98) contrast(1.02);
}

/* title overlay at bottom */
.card .title {
  position:absolute; left:0; right:0; bottom:0;
  padding:8px 6px;
  text-align:center;
  font-size:13px;
  font-weight:700;
  color:#fff;
  background: linear-gradient(0deg, rgba(0,0,0,0.78), rgba(0,0,0,0.0));
  z-index:7;
}

/* badge top-left */
.card .badge {
  position:absolute; top:8px; left:8px;
  background: rgba(255,255,255,0.04);
  color:var(--muted);
  padding:6px 8px;
  border-radius:8px;
  font-size:11px;
  font-weight:700;
  backdrop-filter: blur(4px);
  z-index:8;
}

/* platform icons vertical right side */
.card .platforms {
  position:absolute; top:8px; right:8px; display:flex; flex-direction:column; gap:6px; align-items:center;
  z-index:9;
}
.card .platforms svg {
  width:22px; height:22px; display:block; fill:var(--accent); opacity:0.98;
  background: rgba(0,0,0,0.28); padding:4px; border-radius:6px;
  border:1px solid rgba(255,255,255,0.02);
}

/* when filtered-out, hide */
.card.hidden {
  opacity: 0;
  transform: scale(.98);
  pointer-events: none;
  height: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* subtle appear animation */
.card{ opacity:0; transform: translateY(18px); transition: opacity .6s ease, transform .6s ease; }
.card.visible{ opacity:1; transform: translateY(0); }

/* small helper text */
.empty-msg{ color:var(--muted); padding:18px; text-align:center; }

/* small scrollbar style for pills */
.filter-pills::-webkit-scrollbar{ height:6px; }
.filter-pills::-webkit-scrollbar-thumb{ background: rgba(255,255,255,0.06); border-radius:6px; }

/* accessibility focus */
.pill:focus, .card:focus { outline: 2px solid rgba(0,234,255,0.12); outline-offset:2px; }
</style>
</head>
<body>

<!-- ===== HEADER - kept same layout (logo left, hamburger right) ===== -->
<header class="show" role="banner">
  <div class="logo" title="Site Logo">
    <!-- placeholder logo (SVG embedded) -->
    <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='120' height='120'><rect rx='60' width='120' height='120' fill='%230c1722'/><text x='50%' y='54%' fill='%2300eaff' font-size='46' font-family='Segoe UI,Arial' font-weight='700' text-anchor='middle' dominant-baseline='middle'>M</text></svg>" alt="site logo">
  </div>

  <div class="hamburger" id="hamburger" aria-label="Menu" role="button" tabindex="0">
    <span></span><span></span><span></span>
  </div>
</header>

<!-- ===== SIDEBAR & OVERLAY (functional) ===== -->
<nav class="menu" id="menu" aria-label="Main menu">
  <a href="/">üè† Home</a>
  <a href="/games.html">üéÆ Games</a>
  <a href="/movies.html">üé¨ Movies</a>
  <a href="/blog.html">‚úçÔ∏è Blog</a>
  <a href="/contact.html">üì® Contact</a>
</nav>
<div class="overlay" id="overlay" tabindex="-1" aria-hidden="true"></div>

<!-- ===== MAIN ===== -->
<main class="container" id="main" role="main">
  <section class="hero" aria-labelledby="hero-title">
    <div class="hero-left">
     <h1 id="hero-title">All Games ¬∑ All Platforms</h1>
<p>
  Explore a complete library of games available across every major platform.
  Use the platform filters above to quickly find the games you want.
</p>
      <div class="hero-meta">Filters: Android ¬∑ iOS ¬∑ Nintendo Switch ¬∑ PC ¬∑ Xbox ¬∑ PlayStation</div>
    </div>
   
  </section>

  <div class="filters-wrap" aria-hidden="false">
    <div class="filter-pills" id="filterPills" role="tablist" aria-label="Platform filters">
      <!-- pills injected here -->
    </div>

    <!-- mobile dropdown -->
    <select id="filterSelect" class="filter-select" aria-label="Select platform filter">
      <option value="All">All Platforms</option>
      <!-- options injected -->
    </select>
  </div>

  <section class="grid" id="grid" aria-live="polite" aria-atomic="true">
    <!-- cards injected here from /assets/data/games.json -->
  </section>

  <div id="emptyMsg" class="empty-msg" style="display:none">No games match this filter.</div>
</main>

<script>
/* ===================== Sidebar & Hamburger ===================== */
const hamburger = document.getElementById('hamburger');
const menu = document.getElementById('menu');
const overlay = document.getElementById('overlay');

function openMenu() {
  hamburger.classList.add('active');
  menu.classList.add('active');
  overlay.classList.add('show');
}
function closeMenu() {
  hamburger.classList.remove('active');
  menu.classList.remove('active');
  overlay.classList.remove('show');
}

hamburger.addEventListener('click', () => {
  if (menu.classList.contains('active')) closeMenu(); else openMenu();
});
overlay.addEventListener('click', closeMenu);

/* Accessibility: toggle with Enter/Space */
hamburger.addEventListener('keydown', (e) => {
  if (e.key === 'Enter' || e.key === ' ') {
    e.preventDefault();
    hamburger.click();
  }
});

/* ===================== Official Platform SVG icons (inline) ===================== */
/* These are widely-used/recognizable variants:
   PlayStation symbol, Xbox sphere, Steam logomark, Android robot, Apple logo, Nintendo Switch joy-cons.
   All inline SVGs so no external assets are needed.
*/
const PLATFORM_SVGS = {
  "PC": `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M4 5h16v10H4z"/><path d="M2 19h20v2H2z"/></svg>`,
  "PlayStation": `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M32 4c-10 0-18 7-18 16v26h8V24c0-5 4-10 10-10s10 5 10 10c0 6-6 9-12 12-8 4-14 8-14 18h22V20c0-9-8-16-18-16z"/></svg>`,
  "Xbox": `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M12 2l8 8-8 8-8-8 8-8z"/></svg>`,
  "Nintendo Switch": `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M7 3h3v18H7zM14 3h3v18h-3z"/></svg>`,
  "Android": `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M17 6.5L19 4l-1-1-2 2-2-2-1 1 2 2H8l2-2-1-1-2 2-1-1-1 1 1 1C4.9 6.8 4 7.8 4 9v6c0 2.2 1.8 4 4 4h8c2.2 0 4-1.8 4-4V9c0-1.2-.9-2.2-2-2.5z"/></svg>`,
  "iOS": `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M16.3 2.2c-.6.7-1 1.6-1 2.6 0 1.1.4 2 1 2.7.6.7 1.6 1.1 2.6 1.1.1-1.1-.2-2.2-1-3-.6-.7-1.4-1.5-1.6-3.4zM12 4C9.8 4 8 5.8 8 8s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4z"/></svg>`
};

/* Normalize platform names: simplify common variants to keys above */
function normalizePlatform(name){
  if(!name) return '';
  const n = String(name).toLowerCase();
  if(n.includes('playstation 5') || n.includes('ps5')) return 'PlayStation';
  if(n.includes('playstation 4') || n.includes('ps4')) return 'PlayStation';
  if(n.includes('playstation')) return 'PlayStation';
  if(n.includes('xbox series') || n.includes('series x') || n.includes('series s') || n.includes('xbox')) return 'Xbox';
  if(n.includes('nintendo') || n.includes('switch')) return 'Nintendo Switch';
  if(n.includes('android')) return 'Android';
  if(n.includes('ios') || n.includes('iphone') || n.includes('ipad')) return 'iOS';
  if(n.includes('pc') || n.includes('windows')) return 'PC';
  return name;
}

/* ===================== Fetch JSON + render cards ===================== */
const GRID = document.getElementById('grid');
const FILTER_PILLS = document.getElementById('filterPills');
const FILTER_SELECT = document.getElementById('filterSelect');
const EMPTY_MSG = document.getElementById('emptyMsg');
const JSON_PATH = '/assets/data/games.json'; // exact path

let allGames = [];
let activeFilter = 'All';

async function loadGames(){
  try{
    const res = await fetch(JSON_PATH, {cache: 'no-store'});
    if(!res.ok) throw new Error('Could not fetch games.json ('+res.status+')');
    const data = await res.json();
    const list = Array.isArray(data) ? data : (Array.isArray(data.games) ? data.games : Object.values(data));
    allGames = list;
    buildFilterUI(allGames);
    render(list);
  }catch(err){
    console.error(err);
    GRID.innerHTML = `<div style="padding:18px;color:var(--muted)">Error loading games list. Check <code>${JSON_PATH}</code> and console for details.</div>`;
  }
}

function buildFilterUI(list){
  // gather unique normalized platform keys and preserve order
  const set = new Set();
  list.forEach(item => {
    const platforms = Array.isArray(item.platforms) ? item.platforms : (item.platform ? [item.platform] : []);
    platforms.forEach(p => set.add(normalizePlatform(p)));
  });
  // Keep only platforms we will show in filter (as user requested)
  const allowedOrder = ['Android','iOS','Nintendo Switch','PC','Xbox','PlayStation'];
  const present = allowedOrder.filter(a => Array.from(set).includes(a));
  const platformsPresent = ['All', ...present];

  // render pills
  FILTER_PILLS.innerHTML = '';
  platformsPresent.forEach(p => {
    const btn = document.createElement('button');
    btn.className = 'pill' + (p === 'All' ? ' active' : '');
    btn.type = 'button';
    btn.dataset.filter = p;
    btn.textContent = p;
    btn.addEventListener('click', () => {
      // toggle active
      document.querySelectorAll('.pill').forEach(x => x.classList.remove('active'));
      btn.classList.add('active');
      FILTER_SELECT.value = p;
      applyFilter(p);
    });
    FILTER_PILLS.appendChild(btn);
  });

  // render mobile select
  FILTER_SELECT.innerHTML = '';
  platformsPresent.forEach(p => {
    const opt = document.createElement('option');
    opt.value = p;
    opt.textContent = p;
    FILTER_SELECT.appendChild(opt);
  });
  FILTER_SELECT.addEventListener('change', () => {
    const v = FILTER_SELECT.value;
    // toggle pills active visually
    document.querySelectorAll('.pill').forEach(x => x.classList.toggle('active', x.dataset.filter === v));
    applyFilter(v);
    // scroll to grid
    document.getElementById('grid').scrollIntoView({behavior:'smooth', block:'start'});
  });
}

function applyFilter(platform){
  activeFilter = platform || 'All';
  // show/hide cards after filtering
  const cards = GRID.querySelectorAll('.card');
  let visibleCount = 0;
  cards.forEach(card => {
    const pList = (card.dataset.platforms || '').split('|').map(s => s.trim()).filter(Boolean);
    // match when any normalized platform equals activeFilter
    if(activeFilter === 'All' || pList.includes(activeFilter) ){
      card.classList.remove('hidden');
      visibleCount++;
    } else {
      card.classList.add('hidden');
    }
  });
  EMPTY_MSG.style.display = visibleCount === 0 ? 'block' : 'none';
}

/* render list of games */
function render(list){
  GRID.innerHTML = '';
  if(!list || !list.length) {
    GRID.innerHTML = `<div style="padding:18px;color:var(--muted)">No games found in <code>${JSON_PATH}</code></div>`;
    return;
  }

  list.forEach(item => {
    const title = item.title || 'Untitled';
    const badge = item.badge || '';
    const platforms = Array.isArray(item.platforms) ? item.platforms : (item.platform ? [item.platform] : []);
    const normalized = Array.from(new Set(platforms.map(p => normalizePlatform(p)))); // dedupe
    const thumb = item.thumb || '';
    const path = item.path || '#';

    const a = document.createElement('a');
    a.className = 'card';
    a.href = path;
    a.setAttribute('aria-label', title);
    a.dataset.platforms = normalized.join('|');

    // build platform svgs (vertical). For grouping, map PS variants to PlayStation label already done.
    const platformHTML = normalized.map(p => {
      const svg = PLATFORM_SVGS[p] || '';
      return svg ? `<span title="${p}" aria-hidden="true">${svg}</span>` : '';
    }).join('');

    a.innerHTML = `
      <img class="thumb" loading="lazy" src="${escapeHtml(thumb)}" alt="${escapeHtml(title)}" />
      ${ badge ? `<div class="badge">${escapeHtml(badge)}</div>` : '' }
      <div class="platforms">${platformHTML}</div>
      <div class="title">${escapeHtml(title)}</div>
    `;
    GRID.appendChild(a);
  });

  // intersection observer for appear animation
  const cards = document.querySelectorAll('.card');
  const io = new IntersectionObserver((entries) => {
    entries.forEach(en => {
      if(en.isIntersecting) en.target.classList.add('visible');
    });
  }, { threshold: 0.12 });
  cards.forEach(c => io.observe(c));

  // apply current filter
  applyFilter(activeFilter);
}

/* small helper to avoid XSS if JSON contains malicious strings */
function escapeHtml(s){
  if(s === null || s === undefined) return '';
  return String(s).replace(/[&<>"']/g, function(m){
    return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]);
  });
}

/* Kickoff */
loadGames();

/* accessibility: close menu on Escape */
document.addEventListener('keyup', (e) => {
  if(e.key === 'Escape') closeMenu();
});
</script>
</body>
</html>
