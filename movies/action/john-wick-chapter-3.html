<!DOCTYPE html>
<html lang="en">
<head>
  
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WZZV77N219"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WZZV77N219');
</script>
  
  
  
<script>
window.currentMovie = {
  title: "John Wick: Chapter 3",
  year: 2019,
  genre: ["Action", "Thriller", "Crime"],
  director: "Chad Stahelski"
};
</script>
  
  
  
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
<!-- ===================== ðŸŒ BLUEVERSE ULTRA-STRONG SEO META BLOCK ===================== -->
<title>John Wick: Chapter 3 â€“ Parabellum (2019) | Cast, Story, Locations, Timeline & Full Breakdown | Blueverse Movies</title>

<meta name="description" content="John Wick: Chapter 3 â€“ Parabellum (2019) â€” John Wick is on the run with a $14 million global contract on his head. Explore full cast, High Table lore, action sequences, production details, story breakdown, and filming locations on Blueverse Movies.">

<meta name="keywords" content="John Wick 3, John Wick Chapter 3, John Wick Parabellum, Keanu Reeves John Wick, High Table, John Wick desert, Continental fight, action thriller 2019, Blueverse Movies">

<meta name="author" content="Blueverse Movies">
<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
<link rel="canonical" href="https://blueverse.space/movies/action/john-wick-3.html">
<meta name="language" content="English">
<meta name="theme-color" content="#0d0d0d">
<meta name="datePublished" content="2019-05-17">
<meta name="dateModified" content="2019-05-17">
<meta name="timezone" content="America/Los_Angeles">

<!-- ===== Open Graph / Facebook ===== -->
<meta property="og:type" content="video.movie">
<meta property="og:title" content="John Wick: Chapter 3 â€“ Parabellum (2019) | Full Breakdown on Blueverse Movies">
<meta property="og:description" content="Explore John Wick: Chapter 3 â€“ Parabellum (2019) â€” cast, High Table lore, action, production, and filming locations. Complete analysis on Blueverse Movies.">
<meta property="og:url" content="https://blueverse.space/movies/action/john-wick-3.html">
<meta property="og:site_name" content="Blueverse Movies">
<meta property="og:image" content="https://media.themoviedb.org/t/p/w440_and_h660_face/ebusUSzWT1tHwaHIPLlRxIPG0OP.jpg">

<!-- ===== Twitter Card ===== -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="John Wick: Chapter 3 â€“ Parabellum (2019) | Cast, Story & Full Breakdown">
<meta name="twitter:description" content="Full hub for John Wick: Chapter 3 â€“ Parabellum (2019) â€” story, cast, locations, lore and action analysis on Blueverse Movies.">
<meta name="twitter:image" content="https://media.themoviedb.org/t/p/w440_and_h660_face/ebusUSzWT1tHwaHIPLlRxIPG0OP.jpg">
<meta name="twitter:site" content="@blueverse">

<!-- ===== Favicon ===== -->
<link rel="icon" href="https://blueverse.space/assets/thumb/logo.png" type="image/png">


<!-- ===================== ðŸŽ¯ JSON-LD MOVIE STRUCTURED DATA ===================== -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Movie",
  "name": "John Wick: Chapter 3 â€“ Parabellum",
  "alternateName": "John Wick 3",
  "url": "https://blueverse.space/movies/action/john-wick-3.html",
  "image": "https://media.themoviedb.org/t/p/w440_and_h660_face/ebusUSzWT1tHwaHIPLlRxIPG0OP.jpg",
  "description": "John Wick: Chapter 3 â€“ Parabellum (2019) â€” After being declared excommunicado, John Wick fights for survival as every assassin in the world is activated by the High Table. A global chase filled with intense action and deepening underworld lore.",
  "genre": ["Action", "Thriller", "Crime"],
  "contentRating": "R",
  "datePublished": "2019-05-17",
  "countryOfOrigin": "US",
  "inLanguage": "en",

  "director": [
    {
      "@type": "Person",
      "name": "Chad Stahelski"
    }
  ],

  "actor": [
    { "@type": "Person", "name": "Keanu Reeves" },
    { "@type": "Person", "name": "Halle Berry" },
    { "@type": "Person", "name": "Laurence Fishburne" },
    { "@type": "Person", "name": "Ian McShane" },
    { "@type": "Person", "name": "Mark Dacascos" },
    { "@type": "Person", "name": "Asia Kate Dillon" },
    { "@type": "Person", "name": "Lance Reddick" }
  ],

  "creator": [
    { "@type": "Person", "name": "Derek Kolstad", "jobTitle": "Writer" }
  ],

  "productionCompany": [
    { "@type": "Organization", "name": "Thunder Road Pictures" },
    { "@type": "Organization", "name": "Summit Entertainment" },
    { "@type": "Organization", "name": "87Eleven Productions" }
  ],

  "filmingLocation": [
    { "@type": "Place", "name": "New York City, USA" },
    { "@type": "Place", "name": "Essaouira, Morocco" },
    { "@type": "Place", "name": "Sahara Desert" }
  ],

  "keywords": [
    "John Wick",
    "John Wick 3",
    "John Wick Chapter 3",
    "Parabellum",
    "High Table",
    "The Continental",
    "Assassin Underworld",
    "Excommunicado",
    "Halle Berry Sofia",
    "Action Thriller",
    "Blueverse John Wick Coverage"
  ]
}
</script>


<!-- ===================== ORGANIZATION SCHEMA ===================== -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "Blueverse Movies",
  "url": "https://blueverse.space",
  "logo": "https://blueverse.space/assets/thumb/logo.png",
  "sameAs": [
    "https://facebook.com/BlueverseMovies",
    "https://twitter.com/blueverse",
    "https://instagram.com/blueverse"
  ],
  "contactPoint": {
    "@type": "ContactPoint",
    "contactType": "customer support",
    "email": "support@blueverse.space",
    "availableLanguage": ["English"]
  }
}
</script>


<!-- ===================== BREADCRUMB SCHEMA ===================== -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://blueverse.space/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Movies",
      "item": "https://blueverse.space/movies/"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Action",
      "item": "https://blueverse.space/movies/action/"
    },
    {
      "@type": "ListItem",
      "position": 4,
      "name": "John Wick: Chapter 3 â€“ Parabellum",
      "item": "https://blueverse.space/movies/action/john-wick-3.html"
    }
  ]
}
</script>


<!-- ===================== âœ… END BLUEVERSE SEO BLOCK ===================== -->

  <style>
/* ===== GLOBAL RESET ===== */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
body {
  font-family: 'Segoe UI', sans-serif;
  background: #000;
  color: #fff;
  overflow-x: hidden;
}

/* ===== HEADER ===== */
header {
  position: fixed;
  top: 1rem;
  left: 50%;
  transform: translateX(-50%) scale(0.9);
  width: 70px;
  height: 60px;
  background: rgba(255,255,255,0.05);
  border-radius: 999px;
  backdrop-filter: blur(12px);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 1.2rem;
  z-index: 1000;
  opacity: 0;
  transition: all 0.6s ease;
}
header.show { opacity: 1; }
header.expanded {
  width: 90%;
  max-width: 1100px;
  transform: translateX(-50%) scale(1);
}

/* Logo */
.logo {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  display: flex;
  align-items:center;
  justify-content:center;
  background: rgba(255,255,255,0.08);
  flex-shrink: 0;
}
.logo img {
  width: 140%;
  height: 100%;
  border-radius: 50%;
  object-fit: cover;
}

/* ===== HAMBURGER ===== */
.hamburger {
  width: 30px;
  height: 22px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  cursor: pointer;
}
.hamburger span {
  height: 3px;
  width: 100%;
  background: cyan;
  border-radius: 3px;
  transition: 0.3s;
}
.hamburger.active span:nth-child(1) {
  transform: rotate(45deg) translate(5px, 5px);
}
.hamburger.active span:nth-child(2) { opacity: 0; }
.hamburger.active span:nth-child(3) {
  transform: rotate(-45deg) translate(6px,-6px);
}

/* ===== SIDEBAR MENU ===== */
.menu {
  position: fixed;
  top: 0;
  left: -100%;
  width: 270px;
  height: 100%;
  background: rgba(0,0,0,0.95);
  backdrop-filter: blur(10px);
  border-right: 2px solid rgba(0,255,255,0.25);
  transition: 0.5s ease;
  overflow-y: auto;
  z-index: 999;
}
.menu.active { left: 0; }

.sidebar-content {
  padding: 2rem 1rem;
  text-align: center;
}
.menu a {
  display: block;
  margin: 0.6rem 0;
  padding: 0.7rem 1rem;
  color: cyan;
  text-decoration: none;
  border-radius: 10px;
  border: 1px solid rgba(0,255,255,0.25);
}
.menu a:hover {
  background: cyan;
  color: #000;
}

/* Tags */
.sidebar-sub {
  margin: 2rem 0 1rem;
  font-size: 1.1rem;
  color: #00e6e6;
}
.sidebar-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  justify-content: center;
}
.sidebar-tags a {
  padding: 0.4rem 0.8rem;
  border-radius: 6px;
  border: 1px solid rgba(0,255,255,0.25);
  background: rgba(255,255,255,0.05);
  font-size: 0.9rem;
}
.sidebar-tags a:hover {
  background: cyan;
  color: #000;
}

/* Social */
.sidebar-social {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
  margin-top: 1rem;
}
.sidebar-social a:hover {
  background: cyan;
  color: #000;
}

/* Scrollbar */
.menu::-webkit-scrollbar { width: 6px; }
.menu::-webkit-scrollbar-thumb { background: cyan; }

/* Responsive */
@media (max-width:600px) {
  .menu { width: 80%; }
}

/* ===== MAIN CONTAINER ===== */
main {
  padding-top: 120px;
  width: 90%;
  max-width: 1000px;
  margin: 2rem auto;
}

/* ===== BREADCRUMB ===== */
#breadcrumb {
  width: 100%;
  padding: 0.8rem 1.5rem;
  background: rgba(0,255,255,0.05);
  border-radius: 10px;
  display: flex;
  gap: 8px;
  font-size: 0.95rem;
  color: cyan;
}
#breadcrumb a { color: cyan; }
#breadcrumb a:hover { color: #fff; }

/* ===== SEARCH BAR ===== */
.search-container {
  position: sticky;
  top: 90px;
  max-width: 650px;
  margin: 10px auto;
  background: #0d1b2a;
  border-radius: 15px;
  z-index: 9999;
}

#universal-search {
  width: 100%;
  padding: 12px;
  font-size: 16px;
  background: #1b263b;
  border: 1px solid #1b263b;
  border-radius: 8px;
  color: #e0e1dd;
  position: relative;
  z-index: 9999;
}

.search-results {
  position: absolute;
  top: 50px;
  width: 100%;
  background: #0d1b2a;
  border-radius: 8px;
  max-height: 300px;
  overflow-y: auto;
  z-index: 99999;
  box-shadow: 0px 4px 12px rgba(0,0,0,.6);
}

.search-item {
  display: flex;
  gap: 12px;
  padding: 12px;
  border-bottom: 1px solid #1b263b;
  cursor: pointer;
}
.search-item:hover { background: #1b263b; }
.search-item img {
  width: 50px;
  height: 50px;
  object-fit: cover;
  border-radius: 6px;
}

@media (max-width: 480px) {
  .search-container { max-width: 90%; }
  .search-item img { width: 40px; height: 40px; }
}

/* ===== HERO POSTER SECTION ===== */
.hero-poster-section {
  position: relative;
  height: 360px;
  border-radius: 16px;
  overflow: hidden;
  margin: 30px auto;
  max-width: 1400px;
  background: #000;
}

.hero-bg { position: absolute; inset: 0; z-index: 1; }

.hero-bg img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  filter: blur(8px) brightness(0.55);
}

.hero-overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    to right,
    rgba(0, 0, 0, 0.85),
    rgba(0, 0, 0, 0.35),
    rgba(0, 0, 0, 0.1)
  );
  z-index: 2;
}

.hero-content {
  position: relative;
  z-index: 5;
  height: 100%;
  display: flex;
  align-items: center;
  gap: 30px;
  padding-left: 30px;
}

.hero-poster img {
  width: 160px;
  height: 240px;
  border-radius: 14px;
  object-fit: cover;
  border: 2px solid #1e2a40;
  background: #111;
}

@media(max-width:700px) {
  .hero-poster-section { height: 500px; }
  .hero-content { 
    flex-direction: column;
    justify-content: flex-end;
    padding: 20px;
  }
  .hero-poster img {
    width: 190px;
    height: 280px;
  }
}

/* ===== SCREENSHOT SECTION ===== */
.screenshot-section {
  background: #0a0f1c;
  border: 1px solid #1b2540;
  padding: 20px;
  border-radius: 16px;
  max-width: 900px;
  margin: auto;
  color: #c9d4ff;
}
.screenshot-scroll {
  display: flex;
  gap: 16px;
  overflow-x: auto;
  padding-bottom: 10px;
}
.ss-item {
  min-width: 210px;
  height: 130px;
  border-radius: 14px;
  overflow: hidden;
  border: 1px solid #223357;
  background: #111a2e;
}
.ss-item img {
  width: 100%;
  height: 100%;
}

@media (max-width: 480px) {
  .ss-item {
    min-width: 150px;
    height: 95px;
  }
}
@media (min-width: 1000px) {
  .ss-item {
    min-width: 240px;
    height: 150px;
  }
}


/* =========================
      POPUP MODAL
========================= */

body.ss-blur {
    filter: none !important;
}

.ss-modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.82);
    justify-content: center;
    align-items: center;
    z-index: 9999;
}

.ss-modal-img {
    max-width: 90%;
    max-height: 90%;
    border-radius: 14px;
    border: 2px solid #4ca3ff;
    box-shadow: 0 0 30px rgba(0,0,0,0.6);
}

.ss-close {
    position: absolute;
    top: 20px;
    right: 30px;
    font-size: 40px;
    color: #fff;
    cursor: pointer;
    font-weight: bold;
    transition: .3s;
}

.ss-close:hover {
    color: #4ca3ff;
}

/* =========================
       CAST SECTION
========================= */

.cast-section {
    background: #0a0f1c;
    border: 1px solid #1b2540;
    padding: 25px;
    border-radius: 16px;
    max-width: 1200px;
    margin: 40px auto;
    color: #d6e4ff;
}

.cast-section h3 {
    font-size: 24px;
    margin-bottom: 20px;
    color: #4ca3ff;
}

.cast-grid {
    display: grid;
    gap: 22px;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
}

.cast-card {
    background: #111a2e;
    border: 1px solid #1f2a40;
    padding: 18px 12px;
    text-align: center;
    border-radius: 14px;
    transition: .25s;
}

.cast-card:hover {
    background: #1b2540;
    transform: translateY(-4px);
}

.cast-img {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #4ca3ff;
    margin-bottom: 10px;
    transition: .25s;
}

.cast-name {
    font-size: 15px;
    font-weight: bold;
    color: #e4ecff;
}

.cast-role {
    font-size: 13px;
    color: #9bbcff;
}

.cast-card.extra {
    display: none;
}

.cast-more-btn {
    margin: 20px auto 0;
    display: block;
    padding: 10px 22px;
    border-radius: 10px;
    border: 1px solid #4ca3ff;
    background: #101a2e;
    color: #d6e4ff;
    cursor: pointer;
    transition: .3s;
}

.cast-more-btn:hover {
    background: #1b2540;
}

/* Responsive */
@media (max-width: 480px) {
    .cast-img { width: 70px; height: 70px; }
    .cast-name { font-size: 14px; }
}

@media (min-width: 1200px) {
    .cast-grid { grid-template-columns: repeat(6, 1fr); }
    .cast-img { width: 105px; height: 105px; }
    .cast-card { padding: 25px 15px; }
    .cast-name { font-size: 16px; }
}

@media (min-width: 1600px) {
    .cast-grid { grid-template-columns: repeat(7, 1fr); }
    .cast-img { width: 115px; height: 115px; }
}

/* =========================
     PLATFORM SECTION
========================= */

.platform-section {
    background: #0a0f1c;
    border: 1px solid #1b2540;
    border-radius: 16px;
    padding: 25px;
    max-width: 1200px;
    margin: 40px auto;
    color: #d6e4ff;
}

.platform-section h3 {
    font-size: 22px;
    margin-bottom: 20px;
    color: #4ca3ff;
}

.platform-grid {
    display: grid;
    gap: 20px;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
}

.platform-item {
    background: #111a2e;
    border: 1px solid #223357;
    padding: 18px 10px;
    border-radius: 12px;
    text-align: center;
    transition: .25s;
}

.platform-item:hover {
    background: #1b2540;
    transform: translateY(-3px);
}

.platform-item svg {
    width: 32px;
    height: 32px;
    margin-bottom: 8px;
    transition: .25s;
}

.platform-name {
    font-size: 14px;
    color: #b9ccff;
}

/* Responsive */
@media (max-width: 480px) {
    .platform-item svg { width: 28px; height: 28px; }
    .platform-name { font-size: 12px; }
}

@media (min-width: 1200px) {
    .platform-grid { grid-template-columns: repeat(6, 1fr); }
    .platform-item { padding: 20px 12px; }
    .platform-item svg { width: 40px; height: 40px; }
    .platform-name { font-size: 15px; }
}

@media (min-width: 1600px) {
    .platform-grid { grid-template-columns: repeat(7, 1fr); }
    .platform-item svg { width: 46px; height: 46px; }
}

/* =========================
       RATING SECTION
========================= */

.review-box {
    width: 100%;
    max-width: 600px;
    padding: 22px;
    background: #0d111a;
    border: 1px solid #1f2a40;
    border-radius: 16px;
    color: #fff;
    margin: auto;
}

.review-box h3 {
    margin-bottom: 22px;
    color: #4ca3ff;
    font-size: 22px;
}

.r-row {
    margin-bottom: 22px;
}

.r-label {
    font-size: 15px;
    margin-bottom: 6px;
    color: #c9d4ff;
}

.r-bar {
    width: 100%;
    height: 18px;
    background: #1e2a3d;
    border-radius: 12px;
    overflow: hidden;
    border: 1px solid #3e4f6a;
}

.r-fill {
    height: 100%;
    border-radius: 12px;
    transition: width .5s;
}

.imdb { width: 74%; background: #0099ff; }
.rt   { width: 82%; background: #ff4757; }
.meta { width: 69%; background: #2ed573; }
.lb   { width: 79%; background: #5352ed; }

.r-value {
    margin-top: 5px;
    font-size: 13px;
    color: #b8c7ff;
}

/* Responsive */
@media (max-width: 480px) {
    .review-box { padding: 16px; }
    .review-box h3 { font-size: 18px; margin-bottom: 18px; }
    .r-label { font-size: 14px; }
    .r-bar { height: 14px; }
}

@media (min-width: 900px) {
    .review-box { max-width: 750px; padding: 28px; }
    .r-bar { height: 20px; }
    .review-box h3 { font-size: 24px; }
}


/* =========================
      PLOT SECTION
========================= */

.plot-section {
  background: rgba(10,15,28,.9);
  border: 1px solid #1b2540;
  border-radius: 20px;
  padding: 30px;
  max-width: 1000px;
  margin: 50px auto;
  color: #d6e4ff;
  backdrop-filter: blur(8px);
  box-shadow: 0 0 25px rgba(0,20,60,.4);
}

.plot-section h3 {
  font-size: 24px;
  margin-bottom: 25px;
  color: #4ca3ff;
  font-weight: 600;
}

.tabs {
  display: flex;
  gap: 14px;
  margin-bottom: 25px;
  border-bottom: 1px solid #25345a;
  padding-bottom: 10px;
  overflow-x: auto;
}

.tab-btn {
  padding: 12px 20px;
  background: #0f182b;
  border: 1px solid #223357;
  border-radius: 14px;
  cursor: pointer;
  color: #bcd0ff;
  font-size: 15px;
  white-space: nowrap;
  transition: .25s;
  position: relative;
}

.tab-btn:hover {
  background: #1b2540;
  box-shadow: 0 0 10px rgba(76,163,255,.3);
}

.tab-btn.active {
  background: #4ca3ff;
  color: #0a0f1c;
  border-color: #4ca3ff;
  box-shadow: 0 0 12px rgba(76,163,255,.5);
}

.tab-btn.active::after {
  content: "";
  position: absolute;
  bottom: -12px;
  left: 50%;
  transform: translateX(-50%);
  width: 60%;
  height: 3px;
  background: #4ca3ff;
  border-radius: 3px;
  animation: fadeIn .3s;
}

@keyframes fadeIn {
  from { width: 0; opacity: 0; }
  to   { width: 60%; opacity: 1; }
}

.tab-content {
  display: none;
  padding: 5px;
  font-size: 16px;
  line-height: 1.8;
  color: #d6e4ff;
  animation: fadeContent .3s;
}

.tab-content.active {
  display: block;
}

@keyframes fadeContent {
  from { opacity: 0; transform: translateY(4px); }
  to   { opacity: 1; transform: translateY(0); }
}

@media(max-width:500px) {
  .tab-btn { padding: 10px 14px; font-size: 13px; }
  .plot-section { padding: 22px; }
}


/* =========================
     MOVIE INFO SECTION
========================= */

.movie-info-section {
  background: #0a0f1c;
  border: 1px solid #1b2540;
  border-radius: 18px;
  padding: 28px;
  max-width: 1100px;
  margin: 40px auto;
  color: #d6e4ff;
}

.movie-title {
  font-size: 28px;
  font-weight: bold;
  color: #4ca3ff;
  margin-bottom: 10px;
}

.movie-sub {
  font-size: 15px;
  color: #9bbcff;
  margin-bottom: 25px;
}

.info-grid {
  display: grid;
  grid-template-columns: repeat(2,1fr);
  gap: 18px;
}

@media(min-width:768px) {
  .info-grid {
    grid-template-columns: repeat(auto-fit,minmax(180px,1fr));
  }
}

.info-box {
  background: #111a2e;
  border: 1px solid #223357;
  padding: 20px;
  border-radius: 14px;
}

.info-label {
  font-size: 14px;
  color: #4ca3ff;
  margin-bottom: 6px;
}

.info-value {
  font-size: 16px;
  font-weight: bold;
}

/* Hidden items */
[data-more] { display: none; }

/* More Button */
.more-btn {
  margin-top: 18px;
  padding: 10px 16px;
  background: #1b2540;
  border: 1px solid #4ca3ff;
  color: #c9d4ff;
  border-radius: 8px;
  cursor: pointer;
  transition: .3s;
}
.more-btn:hover { background: #223357; }


/* =========================
         FOOTER
========================= */

.blueverse-footer {
  background: #050b18;
  color: #cdd9ff;
  padding: 50px 20px 30px;
  border-top: 2px solid #0b1733;
}

.footer-container {
  display: grid;
  grid-template-columns: repeat(auto-fit,minmax(220px,1fr));
  gap: 30px;
  max-width: 1200px;
  margin: auto;
}

.footer-about p {
  color: #b8c6ff;
  font-size: 14px;
}

.footer-links h3,
.footer-social h3,
.footer-about h3,
.footer-attrib h3 {
  color: #66a3ff;
  margin-bottom: 12px;
}

.footer-btns {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.footer-btn {
  background: #0b1733;
  color: #cdd9ff;
  padding: 8px 14px;
  border-radius: 8px;
  text-decoration: none;
  font-size: 14px;
  transition: .3s;
}
.footer-btn:hover {
  background: #007bff;
  color: #fff;
}

.social-btns {
  display: flex;
  gap: 12px;
  margin-top: 10px;
}

.social-btn {
  background: #0b1733;
  color: #66a3ff;
  font-size: 18px;
  padding: 10px 12px;
  border-radius: 10px;
  transition: .3s;
}
.social-btn:hover {
  background: #007bff;
  color: #fff;
}

.footer-attrib ul { list-style: none; padding: 0; }
.footer-attrib ul li {
  font-size: 13px;
  color: #a7b5f7;
  margin-bottom: 6px;
}
.footer-attrib ul li a {
  color: #66a3ff;
  text-decoration: none;
}
.footer-attrib ul li a:hover { text-decoration: underline; }

.footer-bottom {
  text-align: center;
  border-top: 1px solid #0f1b3a;
  margin-top: 40px;
  padding-top: 15px;
  font-size: 13px;
  color: #8ea2e1;
}

@media(max-width:600px) {
  .footer-container { grid-template-columns: 1fr; text-align: center; }
  .footer-btns, .social-btns { justify-content: center; }
}


/* =========================
         SECTION BOX
========================= */

.section-box {
  background: #0a0f1c;
  border: 1px solid #1b2540;
  padding: 25px;
  border-radius: 16px;
  max-width: 900px;
  margin: 40px auto;
  color: #d6e4ff;
}
.section-box h3 {
  color: #4ca3ff;
  font-size: 23px;
  margin-bottom: 18px;
}


/* =========================
          ACCORDION
========================= */

.acc-box {
  background: #111a2e;
  border: 1px solid #223357;
  border-radius: 14px;
  margin-bottom: 15px;
  overflow: hidden;
}

.acc-head {
  padding: 16px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 17px;
  color: #bcd2ff;
  cursor: pointer;
}

.acc-icon {
  font-size: 24px;
  transition: transform .35s;
}

.acc-body {
  max-height: 0;
  overflow: hidden;
  transition: max-height .45s cubic-bezier(.25,.8,.25,1);
  background: #0e1626;
}


/* =========================
         AWARDS
========================= */

.award-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit,minmax(130px,1fr));
  gap: 18px;
  padding: 20px;
}

.award-card {
  background: #1b2540;
  border: 1px solid #2c3e60;
  padding: 15px;
  text-align: center;
  border-radius: 12px;
  transition: .25s;
}
.award-card:hover { transform: translateY(-3px); }

.award-card img {
  width: 60px;
}


/* =========================
       TRAILER POPUP
========================= */

#trailer-modal,
#clip-modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.9);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 999;
}

.trailer-video {
  width: 90vw;
  max-width: 900px;
  height: 60vh;
  border-radius: 12px;
}
@media(min-width:1024px) {
  .trailer-video { height: 500px; }
}

.trailer-close,
.clip-close {
  position: absolute;
  top: 20px;
  right: 25px;
  font-size: 35px;
  color: white;
  cursor: pointer;
}


/* =========================
           CLIPS
========================= */

.clip-scroll {
  padding: 18px;
  display: flex;
  overflow-x: auto;
  gap: 12px;
}

.clip-scroll::-webkit-scrollbar { height: 6px; }
.clip-scroll::-webkit-scrollbar-thumb {
  background: #2e446a;
  border-radius: 3px;
}

.clip-item {
  min-width: 140px;
  height: 90px;
  border-radius: 10px;
  overflow: hidden;
  border: 1px solid #2c3e60;
  cursor: pointer;
}

.clip-item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.clip-modal-img {
  width: 85%;
  max-width: 560px;
  border-radius: 12px;
}


/* =========================
   MOVIES / SERIES SLIDER
========================= */

.ms-scroll {
  padding: 18px;
  display: flex;
  overflow-x: auto;
  gap: 14px;
  scrollbar-width: thin;
  scrollbar-color: #2e446a transparent;
}

.ms-scroll::-webkit-scrollbar { height: 6px; }
.ms-scroll::-webkit-scrollbar-thumb {
  background: #2e446a;
  border-radius: 3px;
}

.ms-item {
  min-width: 220px;
  height: 130px;
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid #2c3e60;
  position: relative;
  cursor: pointer;
  transition: .25s;
  text-decoration: none;
}

.ms-item:hover {
  transform: scale(1.05);
  border-color: #4ca3ff;
}

.ms-item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.ms-label {
  position: absolute;
  bottom: 0;
  width: 100%;
  padding: 8px;
  color: #fff;
  font-size: 14px;
  text-align: center;
  background: linear-gradient(to top, rgba(0,0,0,.75), transparent);
  font-weight: 600;
}


/* =========================
        MORE MOVIES
========================= */

.more-movies-box {
  margin-top: 25px;
}

.mm-title {
  font-size: 20px;
  font-weight: 700;
  margin-bottom: 12px;
}

.mm-scroll {
  display: flex;
  overflow-x: auto;
  gap: 14px;
  padding-bottom: 10px;
  scrollbar-width: thin;
}

.mm-scroll::-webkit-scrollbar { height: 6px; }
.mm-scroll::-webkit-scrollbar-thumb {
  background: #2e446a;
  border-radius: 3px;
}

.mm-card {
  min-width: 180px;
  height: 260px;
  border-radius: 12px;
  overflow: hidden;
  flex-shrink: 0;
  cursor: pointer;
  border: 1px solid #2c3e60;
  transition: .25s;
}

.mm-card:hover {
  transform: scale(1.05);
  border-color: #4ca3ff;
}

.mm-card img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.mm-overlay {
  position: absolute;
  bottom: 0;
  width: 100%;
  padding: 10px;
  background: linear-gradient(to top, rgba(0,0,0,.8), transparent);
}

.mm-title-text {
  color: #fff;
  font-size: 15px;
  font-weight: 600;
}

.mm-info {
  display: flex;
  gap: 6px;
  margin-top: 4px;
  font-size: 12px;
  color: #dcdcdc;
}

.mm-badge {
  background: #ff2e63;
  padding: 2px 6px;
  border-radius: 6px;
  font-size: 11px;
  color: #fff;
  font-weight: 600;
}


/* Platform Icon */

.platform-icon {
  width: 42px;
  height: 42px;
  object-fit: contain;
  margin-bottom: 5px;
}

/* Tags */
.tags-section {
  margin-top: 25px;
  padding: 20px;
  background: #0c1424;
  border: 1px solid #1e2d4d;
  border-radius: 14px;
  color: #c9d4ff;
}
.tags-section h3 {
  margin-bottom: 14px;
  color: #4ca3ff;
}
.tags-list {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}
.tags-list span {
  background: #162036;
  border: 1px solid #243662;
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 13px;
  transition: .25s;
}
.tags-list span:hover {
  background: #4ca3ff;
  color: #0b1220;
}

/* Locations */
.location-section {
  margin-top: 25px;
  padding: 20px;
  background: #0c1424;
  border: 1px solid #1e2d4d;
  border-radius: 14px;
}
.location-section h3 {
  margin-bottom: 14px;
  color: #4ca3ff;
}
.location-box {
  display: grid;
  gap: 16px;
}
.loc-item {
  background: #111a2e;
  padding: 14px;
  border: 1px solid #23345a;
  border-radius: 10px;
  transition: .25s ease;
}
.loc-item:hover {
  border-color: #4ca3ff;
  transform: translateY(-2px);
}
.loc-title {
  font-size: 15px;
  font-weight: 600;
  color: #fff;
}
.loc-sub {
  font-size: 13px;
  color: #9db4e4;
  margin-top: 3px;
}

/* Timeline */
.timeline-section {
  margin-top: 25px;
  padding: 20px;
  background: #0c1424;
  border: 1px solid #1e2d4d;
  border-radius: 14px;
  color: #c9d4ff;
}
.timeline-section h3 {
  margin-bottom: 18px;
  color: #4ca3ff;
}
.timeline {
  position: relative;
  padding-left: 25px;
  border-left: 2px solid #253a63;
  display: flex;
  flex-direction: column;
  gap: 20px;
}
.tl-item {
  position: relative;
}
.tl-dot {
  position: absolute;
  left: -10px;
  top: 4px;
  width: 14px;
  height: 14px;
  background: #4ca3ff;
  border-radius: 50%;
  border: 3px solid #0c1424;
  box-shadow: 0 0 8px rgba(76, 163, 255, 0.7);
}
.tl-content {
  background: #111a2e;
  padding: 12px 14px;
  border-radius: 10px;
  border: 1px solid #23345a;
  transition: .25s;
}
.tl-content:hover {
  transform: translateY(-3px);
  border-color: #4ca3ff;
}
.tl-year {
  font-size: 15px;
  color: #4ca3ff;
  font-weight: 600;
  margin-bottom: 6px;
}
.tl-text {
  font-size: 13px;
  color: #c9d4ff;
  line-height: 1.4;
}

/* Recommendations */
.rec-section {
  margin-top: 30px;
}
.rec-section h3 {
  color: #4ca3ff;
  margin: 20px 0 12px;
}

.rec-row {
  display: flex;
  overflow-x: auto;
  gap: 16px;
  padding-bottom: 8px;
  scrollbar-width: thin;
}

.rec-card {
  min-width: 135px;
  border-radius: 12px;
  overflow: hidden;
  position: relative;
  border: 1px solid #2c3e60;
  background: #111a2e;
  transition: .25s;
}
.rec-card:hover {
  transform: scale(1.06);
  border-color: #4ca3ff;
}
.rec-card img {
  width: 135px;
  height: 200px;
  object-fit: cover;
}
.rec-overlay {
  position: absolute;
  bottom: 0;
  width: 100%;
  padding: 8px;
  background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
  color: #fff;
  font-size: 13px;
  text-align: center;
  font-weight: 600;
}

/* Strong Tag */
strong {
  color: #1e47ff !important;
  font-weight: 700;
}

/* Trailer Modal */
.trailer-modal {
  display: none;
  position: fixed;
  z-index: 9999;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.85);
  backdrop-filter: blur(4px);
  justify-content: center;
  align-items: center;
}

.trailer-content {
  position: relative;
  width: 90%;
  max-width: 900px;
  background: #000;
  border-radius: 12px;
  padding: 10px;
}

.trailer-content iframe {
  width: 100%;
  height: 500px;
  border-radius: 12px;
}

.close-btn {
  position: absolute;
  top: -10px;
  right: -10px;
  background: #1b2540;
  padding: 6px 14px;
  border-radius: 50%;
  font-size: 22px;
  cursor: pointer;
  color: #fff;
  border: 1px solid #2e446a;
}

/* DEFAULT COLLAPSED (APPLIES TO BOTH) */
.cast-grid,
.platform-grid {
  max-height: 300px;
  overflow: hidden;
  transition: max-height 0.4s ease;
}

/* PLATFORM â€” WHEN EXPANDED */
.platform-grid.expanded {
  max-height: 2000px;
}

/* CAST â€” WHEN EXPANDED */
.cast-grid.expanded {
  max-height: 2000px;
}

/* Screenshot Popup */
.popup {
  display: none;
  position: fixed;
  z-index: 9999;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.85);
  justify-content: center;
  align-items: center;
}
.popup-img {
  max-width: 90%;
  max-height: 90%;
  border-radius: 10px;
}
.close-popup {
  position: absolute;
  top: 20px;
  right: 30px;
  color: #fff;
  font-size: 40px;
  cursor: pointer;
}


/* Trailer Popup Modal */
.trailer-modal {
  display: none;
  position: fixed;
  z-index: 99999;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.88);
  backdrop-filter: blur(4px);
  justify-content: center;
  align-items: center;
}

.trailer-content {
  width: 90%;
  max-width: 900px;
  background: #000;
  padding: 10px;
  border-radius: 12px;
  position: relative;
}

.trailer-content iframe {
  width: 100%;
  height: 500px;
  border-radius: 12px;
}

.close-trailer {
  position: absolute;
  top: -10px;
  right: -10px;
  background: #1b2540;
  padding: 6px 14px;
  border-radius: 50%;
  font-size: 24px;
  color: #fff;
  cursor: pointer;
  border: 1px solid #2e446a;
}







  </style>
</head>
<body>

<body>

  <!-- HERO HEADER -->
  <header id="mainHeader" class="show expanded">
    <div class="logo">
      <img src="/assets/thumb/logo.png" alt="Blueverse logo">
    </div>

    <div class="hamburger" id="hamburger">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </header>

  <!-- Search Bar -->
  <div class="search-container">
    <input type="text" id="universal-search" placeholder="Search movies or games..." autocomplete="off" />
    <div id="search-results" class="search-results"></div>
  </div>

  <!-- Sidebar -->
  <div class="menu" id="menu">
    <div class="sidebar-content">
      <h2 class="sidebar-title"><br></h2>

      <a href="/index.html">Home</a>
      <a href="/movies.html">Movies</a>
      <a href="/Game/all-games.html">Top Games List</a>

      <div class="sidebar-sub">Categories</div>
      <div class="sidebar-tags">
        <a href="/movies/action.html">Action Movies</a>
        <a href="/movies/adventure.html">Adventure Movies</a>
        <a href="/movies/horror.html">Horror Movies</a>
      </div>

      <div class="sidebar-sub">Follow Us</div>
      <div class="sidebar-social">
        <a href="https://youtube.com/@blueverseofficial">YouTube</a>
        <a href="https://www.instagram.com/blueverse_official">Instagram</a>
        <a href="https://discord.gg/32y8Cfuw">Discord</a>
        <a href="https://x.com/Blueverse373950">X (Twitter)</a>
      </div>
    </div>
  </div>

  <!-- MAIN MOVIE CONTENT -->
  <main>

    <nav id="breadcrumb"></nav>
    <script src="/breadcrumb.js"></script>

    <!-- HERO POSTER SECTION -->
    <div class="hero-poster-section">
      <div class="hero-bg"><img id="bgPoster"></div>
      <div class="hero-overlay"></div>

      <div class="hero-content">
        <div class="hero-poster">
          <img id="fgPoster">
        </div>
      </div>
    </div>

    <!-- MOVIE INFO -->
    <div class="movie-info-section">
      <div class="movie-title" id="movieTitle"></div>
      <div class="movie-sub" id="movieSub"></div>

      <div class="info-grid">
        <div class="info-box"><div class="info-label">Director</div><div class="info-value" id="director"></div></div>
        <div class="info-box"><div class="info-label">Writers</div><div class="info-value" id="writers"></div></div>
        <div class="info-box"><div class="info-label">Runtime</div><div class="info-value" id="runtime"></div></div>
        <div class="info-box"><div class="info-label">Budget</div><div class="info-value" id="budget"></div></div>
        <div class="info-box"><div class="info-label">Box Office</div><div class="info-value" id="boxOffice"></div></div>
        <div class="info-box"><div class="info-label">Release Date</div><div class="info-value" id="releaseDate"></div></div>
      </div>
    </div>

    <!-- RATINGS -->
    <div class="review-box">
      <h3>Ratings Overview</h3>

      <div class="r-row"><div class="r-label">IMDb</div><div class="r-bar"><div class="r-fill imdb" id="imdbBar"></div></div><div class="r-value" id="imdbVal"></div></div>
      <div class="r-row"><div class="r-label">Rotten Tomatoes</div><div class="r-bar"><div class="r-fill rt" id="rtBar"></div></div><div class="r-value" id="rtVal"></div></div>
      <div class="r-row"><div class="r-label">Metacritic</div><div class="r-bar"><div class="r-fill meta" id="metaBar"></div></div><div class="r-value" id="metaVal"></div></div>
      <div class="r-row"><div class="r-label">Letterboxd</div><div class="r-bar"><div class="r-fill lb" id="lbBar"></div></div><div class="r-value" id="lbVal"></div></div>
    </div>

    <!-- STORY -->
    <div class="plot-section">
      <h3>Story & Plot</h3>
      <div class="tabs">
        <div class="tab-btn active" data-tab="summary">Summary</div>
        <div class="tab-btn" data-tab="story">Story</div>
        <div class="tab-btn" data-tab="details">Details</div>
      </div>

      <div class="tab-content active" id="summary"></div>
      <div class="tab-content" id="story"></div>
      <div class="tab-content" id="details"></div>
    </div>

    <!-- AWARDS + TRAILER + PRODUCTION -->
    <div class="section-box">
      <h3>Awards & Trailer</h3>

      <div class="acc-box">
        <div class="acc-head" onclick="toggleAcc(this)">
          <span>Awards</span><span class="acc-icon">+</span>
        </div>
        <div class="acc-body"><div class="award-grid" id="awardsGrid"></div></div>
      </div>

     <div class="acc-box">
  <div class="acc-head" onclick="toggleAcc(this)">
    <span>Official Trailer</span>
    <span class="acc-icon">+</span>
  </div>

  <div class="acc-body">
    <div class="trailer-wrap">

      <!-- Trailer Iframe -->
      <iframe class="trailer-frame" id="trailer" allowfullscreen></iframe>

      <!-- Popup Button -->
      <button onclick="openTrailerPopup()" 
        style="margin-top:12px;padding:10px 18px;border-radius:8px;
               background:#4ca3ff;color:#0b1220;border:none;font-weight:600;
               cursor:pointer;">
        Watch in Popup
      </button>

    </div>
  </div>
</div>

<!-- POPUP MODAL -->
<div class="trailer-modal" id="trailerModal">
  <div class="trailer-content">
    <span class="close-trailer" onclick="closeTrailerPopup()">Ã—</span>
    <iframe id="trailerPopup" allowfullscreen></iframe>
  </div>
</div>

      <div class="acc-box">
        <div class="acc-head" onclick="toggleAcc(this)">
          <span>Production Team</span><span class="acc-icon">+</span>
        </div>
        <div class="acc-body"><div class="award-grid" id="productionGrid"></div></div>
      </div>
    </div>







    <!-- SCREENSHOTS -->
    <div class="screenshot-section">
      <h3>Screenshots</h3>
      <div class="screenshot-scroll" id="screenshots"></div>
    </div>


<div id="imgPopup" class="popup">
  <span class="close-popup">&times;</span>
  <img id="popupImg" class="popup-img">
</div>




    <!-- CAST -->
    <div class="cast-section" id="cast-sec">
      <h3>Cast</h3>
      <div class="cast-grid" id="castGrid"></div>
      <button class="more-btn" onclick="toggleMore('#cast-sec')">See More</button>
    </div>

    <!-- PLATFORMS -->
    <div class="platform-section" id="platform-sec">
      <h3>Available On</h3>
      <div class="platform-grid" id="platformGrid"></div>
      <button class="more-btn" onclick="toggleMore('#platform-sec')">See More</button>
    </div>

    <!-- TAGS -->
    <div class="tags-section">
      <h3>Tags</h3>
      <div class="tags-list" id="tagsList"></div>
    </div>

    <!-- LOCATIONS -->
    <div class="location-section">
      <h3>Filming Locations</h3>
      <div class="location-box" id="locationBox"></div>
    </div>

    <!-- TIMELINE -->
    <div class="timeline-section">
      <h3>Timeline</h3>
      <div class="timeline" id="timeline"></div>
    </div>

    <!-- RECOMMENDATIONS -->
    <div class="rec-section">
      <h3>Similar Genre</h3>
      <div class="rec-row" id="similarGenre"></div>

      <h3>More From This Director</h3>
      <div class="rec-row" id="sameDirector"></div>

      <h3>Trending Movies</h3>
      <div class="rec-row" id="trendingMovies"></div>

      <h3>You May Also Like</h3>
      <div class="rec-row" id="youMayLike"></div>
    </div>

  </main>



 






<!-- ðŸŒ BLUEVERSE UNIVERSAL FOOTER -->
<footer class="blueverse-footer">
  <div class="footer-container">

    <!-- ðŸ”¹ About Blueverse -->
    <div class="footer-about">
      <h3>About Blueverse</h3>
      <p>Blueverse is your digital hub for <strong>games, movies, guides, and entertainment news</strong>. Explore trailers, reviews, and updates from across the entertainment universe â€” all in one place.</p>
    </div>

    <!-- ðŸ”¹ Footer Navigation -->
    <div class="footer-links">
      <h3>Explore</h3>
      <div class="footer-btns">
        <a href="/about.html" class="footer-btn">About</a>
        <a href="/contact.html" class="footer-btn">Contact</a>
        <a href="/privacy-policy.html" class="footer-btn">Privacy Policy</a>
        <a href="/blog" class="footer-btn">Blog</a>
      </div>
    </div>

   

    <!-- ðŸ”¹ Attribution (Legal & Required) -->
    <div class="footer-attrib">
      <h3>Attributions</h3>
      <ul>
        <li>Icons provided by <a href="https://www.flaticon.com/" target="_blank" rel="noopener">Flaticon</a></li>
        <li>Game data & images powered by <a href="https://rawg.io/apidocs" target="_blank" rel="noopener">RAWG.io API</a></li>
        <li>Movie data provided by <a href="https://www.themoviedb.org/" target="_blank" rel="noopener">TMDB (The Movie Database)</a></li>
      </ul>
    </div>

  </div>

  <div class="footer-bottom">
    <p>Â© <span id="year"></span> <strong>Blueverse</strong>. All rights reserved.</p>
  </div>
</footer>

<!-- ðŸ’… FOOTER STYLING -->

<script>
/* ===========================
  CLEANED, OPTIMIZED & FULL JS
  - preserves original names & behavior
  - avoids duplicate listeners / long tasks
  - defers heavy work off critical path
=========================== */
(() => {
  // helper
  const $ = id => document.getElementById(id);

  /* ===========================
        YEAR AUTO UPDATE
  =========================== */
  try { $('year').textContent = new Date().getFullYear(); } catch (e) {}

  /* ===========================
        SHARED CACHE FOR JSON
  =========================== */
  const cache = {
    movies: null,
    games: null,
    movieJson: null
  };

  /* ===========================
        LIGHTWEIGHT UTILS
  =========================== */
  function safeSet(elId, value) {
    const el = $(elId);
    if (!el) return;
    el.textContent = value;
  }

  /* ===========================
       LOAD / CACHE DATA (movies + games)
       - fetch immediately, parse off-main-thread (idle)
  =========================== */
  async function loadData() {
    if (cache.movies && cache.games) return;
    try {
      // fetch both resources in parallel
      const [mRes, gRes] = await Promise.all([
        fetch('/assets/data/movies.json'),
        fetch('/assets/data/games.json')
      ]);

      // parse on idle / after paint to avoid blocking
      const parse = async () => {
        try {
          cache.movies = await mRes.json();
        } catch (e) {
          console.error('movies.json parse error', e);
          cache.movies = [];
        }
        try {
          cache.games = await gRes.json();
        } catch (e) {
          console.error('games.json parse error', e);
          cache.games = [];
        }
      };

      if ('requestIdleCallback' in window) {
        requestIdleCallback(parse, { timeout: 1500 });
      } else {
        setTimeout(parse, 100);
      }
    } catch (err) {
      console.error('JSON Load Error:', err);
      cache.movies = cache.movies || [];
      cache.games = cache.games || [];
    }
  }

  /* ===========================
       UNIVERSAL SEARCH SYSTEM
  =========================== */
  let currentFocus = -1;
  let _keyboardNavBound = false;

  function searchContent(query) {
    query = (query || '').toLowerCase();
    if (!query) return [];

    const movieRes = (cache.movies || []).filter(m =>
      (m.title || '').toLowerCase().includes(query) ||
      (m.url || '').toLowerCase().includes(query) ||
      (m.image || '').toLowerCase().includes(query)
    );

    const gameRes = (cache.games || []).filter(g =>
      (g.title || '').toLowerCase().includes(query) ||
      (g.path || '').toLowerCase().includes(query) ||
      (g.thumb || '').toLowerCase().includes(query)
    );

    return [...movieRes, ...gameRes];
  }

  function renderResults(results) {
    const box = $('search-results');
    if (!box) return;
    box.innerHTML = '';

    if (!results.length) {
      box.innerHTML = `<p style="padding:10px;">No results found</p>`;
      return;
    }

    const frag = document.createDocumentFragment();

    results.forEach(item => {
      const isMovie = Boolean(item.url);
      const link = isMovie ? item.url : item.path;
      const img = isMovie ? item.image : item.thumb;
      const desc = isMovie
        ? `${item.year ?? ''} ${item.badge ? ' | ' + item.badge : ''}`
        : `${item.platforms?.join(', ') ?? ''} ${item.badge ? ' | ' + item.badge : ''}`;

      const div = document.createElement('div');
      div.className = 'search-item';
      div.innerHTML = `
        <img src="${img || '/assets/thumb/placeholder.png'}" loading="lazy" decoding="async" alt="${(item.title||'')}" />
        <div>
          <h4>${item.title || ''}</h4>
          <p>${desc}</p>
        </div>
      `;
      div.addEventListener('click', () => { if (link) window.location.href = link; });
      frag.appendChild(div);
    });

    box.appendChild(frag);
  }

  function setHighlight(items) {
    items.forEach(i => i.classList.remove('active'));
    items[currentFocus]?.classList.add('active');
  }

  function keyboardNav() {
    if (_keyboardNavBound) return;
    _keyboardNavBound = true;
    const input = $('universal-search');
    if (!input) return;

    input.addEventListener('keydown', e => {
      const items = document.querySelectorAll('.search-item');
      if (!items.length) return;

      if (e.key === 'ArrowDown') {
        e.preventDefault();
        currentFocus = (currentFocus + 1) % items.length;
        setHighlight(items);
      } else if (e.key === 'ArrowUp') {
        e.preventDefault();
        currentFocus = (currentFocus <= 0 ? items.length - 1 : currentFocus - 1);
        setHighlight(items);
      } else if (e.key === 'Enter') {
        e.preventDefault();
        items[currentFocus]?.click();
      }
    });
  }

  (function attachSearchHandlers(){
    const input = $('universal-search');
    if (!input) return;

    keyboardNav(); // bind once only

    let debounceTimer = null;
    input.addEventListener('input', () => {
      clearTimeout(debounceTimer);
      debounceTimer = setTimeout(() => {
        const query = input.value.trim();
        currentFocus = -1;
        if (query.length > 0) {
          renderResults(searchContent(query));
        } else {
          const box = $('search-results');
          if (box) box.innerHTML = '';
        }
      }, 150);
    });

    document.addEventListener('click', e => {
      if (!e.target.closest('.search-container')) {
        const box = $('search-results');
        if (box) box.innerHTML = '';
      }
    });
  })();

  /* ===========================
        HAMBURGER / MENU
  =========================== */
  (function setupHamburger() {
    const hamburger = $('hamburger');
    const menu = $('menu');
    if (!hamburger || !menu) return;
    hamburger.addEventListener('click', () => {
      hamburger.classList.toggle('active');
      menu.classList.toggle('active');
    });
  })();

  /* ===========================
        HEADER ANIMATION ON LOAD
  =========================== */
  window.addEventListener('load', () => {
    const header = $('mainHeader');
    if (!header) return;
    header.classList.add('show');
    setTimeout(() => header.classList.add('expanded'), 800);
  });

  /* ===========================
      EXPANDABLE SECTIONS (safe)
  =========================== */
  (function setupExpandable() {
    document.querySelectorAll('.expandable').forEach(section => {
      const btn = section.querySelector('.read-more-btn');
      const hidden = section.querySelector('.hidden-content');
      if (!btn || !hidden) return;
      btn.addEventListener('click', () => {
        hidden.classList.toggle('show');
        btn.textContent = hidden.classList.contains('show') ? 'Hide' : 'See More';
      });
    });
  })();

  /* ===========================
      IMAGE / CLIP MODALS (kept names)
  =========================== */
  function _openModal(modalId, imgId, src) {
    const modal = $(modalId);
    const img = $(imgId);
    if (!modal) return;
    if (img) img.src = src || '';
    modal.style.display = 'flex';
    document.body.classList.add('ss-blur');
  }

  function _closeModal(modalId, imgId, e) {
    const modal = $(modalId);
    const img = $(imgId);
    if (!modal) return;
    if (e && e.target && e.target.tagName === 'IMG') return;
    if (img) img.src = '';
    modal.style.display = 'none';
    document.body.classList.remove('ss-blur');
  }

  window.openSS = function(src) { _openModal('ss-modal', 'ss-modal-img', src); };
  window.closeSS = function(e) { _closeModal('ss-modal', 'ss-modal-img', e); };
  window.openClip = function(src) { _openModal('clip-modal', 'clip-modal-img', src); };
  window.closeClip = function(e) { _closeModal('clip-modal', 'clip-modal-img', e); };

  /* ===========================
        TABS & ACCORDION
  =========================== */
  (function setupTabs() {
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.tab-btn').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        btn.classList.add('active');
        const target = btn.dataset.tab;
        if (target) document.getElementById(target)?.classList.add('active');
      });
    });
  })();

  window.toggleAcc = function(head) {
    const acc = head.parentElement;
    const body = acc.querySelector('.acc-body');
    const icon = acc.querySelector('.acc-icon');
    if (!body) return;
    const isOpen = !!body.style.maxHeight;
    body.style.maxHeight = isOpen ? null : body.scrollHeight + 'px';
    icon.style.transform = isOpen ? 'rotate(0deg)' : 'rotate(180deg)';
    icon.textContent = isOpen ? '+' : 'âˆ’';
  };

  /* ===========================
        SEE MORE SYSTEM
  =========================== */


  /* ===========================
      RENDER CARDS / RECOMMENDATIONS
  =========================== */
  function renderCards(list, container, templateClass = 'mm-card') {
    if (!container) return;
    container.innerHTML = '';
    if (!Array.isArray(list) || !list.length) {
      container.innerHTML = `<p class="empty-msg">No items found.</p>`;
      return;
    }
    const frag = document.createDocumentFragment();
    list.forEach(item => {
      const card = document.createElement('a');
      card.className = templateClass;
      card.href = item.url || '#';
      card.innerHTML = `
        <img src="${item.image || item.thumb || '/assets/thumb/placeholder.png'}" loading="lazy" decoding="async" alt="${item.title||''}">
        <div class="${templateClass === 'mm-card' ? 'mm-overlay' : 'rec-overlay'}">
          <div class="${templateClass === 'mm-card' ? 'mm-title-text' : 'rec-title'}">${item.title || ''}</div>
          <div class="${templateClass === 'mm-card' ? 'mm-info' : 'rec-info'}">
            <span>${item.year || ''}</span>
            <span class="${templateClass === 'mm-card' ? 'mm-badge' : 'rec-badge'}">${item.badge || ''}</span>
          </div>
        </div>
      `;
      frag.appendChild(card);
    });
    container.appendChild(frag);
  }

  async function loadMoreMovies() {
    await loadData();
    const container = $('moreMovies');
    if (!container) return;
    const random = (cache.movies || []).slice().sort(() => Math.random() - 0.5).slice(0, 10);
    renderCards(random, container, 'mm-card');
  }

  async function loadRecommendations() {
    await loadData();
    const movies = cache.movies || [];
    const current = window.currentMovie || null;
    if (!current) {
      renderCards(movies.slice(0, 12), $('trendingMovies'), 'rec-card');
      renderCards(movies.slice(0, 12), $('youMayLike'), 'rec-card');
      renderCards([], $('similarGenre'), 'rec-card');
      renderCards([], $('sameDirector'), 'rec-card');
      return;
    }

    const removeDupes = list => {
      const map = new Map();
      list.forEach(m => map.set(m.title, m));
      return Array.from(map.values());
    };

    const similarGenre = movies.filter(m =>
      Array.isArray(m.genre) &&
      m.genre.some(g => (current.genre || []).includes(g)) &&
      m.title !== current.title
    );

    const sameDirector = movies.filter(m => m.director && m.director === current.director && m.title !== current.title);

    const trending = movies.filter(m => m.rating).slice().sort((a,b)=> b.rating - a.rating).slice(0,12);
    const youMayLike = movies.filter(m => m.title !== current.title).slice().sort(()=>Math.random()-0.5).slice(0,12);

    renderCards(removeDupes(similarGenre), $('similarGenre'), 'rec-card');
    renderCards(removeDupes(sameDirector), $('sameDirector'), 'rec-card');
    renderCards(removeDupes(trending), $('trendingMovies'), 'rec-card');
    renderCards(removeDupes(youMayLike), $('youMayLike'), 'rec-card');
  }

  /* ===========================
      UTILITY: percent compute
  =========================== */
  function computePercentFromText(valueText) {
    if (!valueText) return 0;
    valueText = valueText.trim();
    if (valueText.includes('/10')) {
      const num = parseFloat(valueText.split('/')[0]) || 0;
      return (num / 10) * 100;
    } else if (valueText.includes('/5')) {
      const num = parseFloat(valueText.split('/')[0]) || 0;
      return (num / 5) * 100;
    } else if (valueText.includes('%')) {
      return parseFloat(valueText) || 0;
    }
    return 0;
  }

  /* ===========================
      RENDER MOVIE JSON (batched + deferred)
  =========================== */
  async function renderMovieJson(url = 'json/john-wick-2.json') {
    try {
      if (!url) {
        console.error('No JSON URL provided to renderMovieJson()');
        return;
      }

      const res = await fetch(url);
      if (!res.ok) throw new Error('Fetch failed: ' + res.status);
      const d = await res.json();
      cache.movieJson = d;

      // LCP-critical: update poster + title quickly
      if (d.background) { const bg = $('bgPoster'); if (bg) bg.src = d.background; }
      if (d.poster) { const fg = $('fgPoster'); if (fg) fg.src = d.poster; }

      safeSet('movieTitle', d.title || '');
      safeSet('movieSub', d.sub || '');
      safeSet('director', d.director || '');
      safeSet('writers', d.writers || '');
      safeSet('runtime', d.runtime || '');
      safeSet('budget', d.budget || '');
      safeSet('boxOffice', d.boxOffice || '');
      safeSet('releaseDate', d.releaseDate || '');

      // ratings quick update (small)
      safeSet('imdbVal', d.ratings?.imdb ? d.ratings.imdb + '/10' : '');
      safeSet('rtVal', d.ratings?.rt ? d.ratings.rt + '%' : '');
      safeSet('metaVal', d.ratings?.meta ? d.ratings.meta + '%' : '');
      safeSet('lbVal', d.ratings?.lb ? d.ratings.lb + '/10' : '');

      if (d.ratings) {
        const imdbBar = $('imdbBar'); if (imdbBar) imdbBar.style.width = ((d.ratings.imdb || 0) * 10) + '%';
        const rtBar = $('rtBar'); if (rtBar) rtBar.style.width = (d.ratings.rt || 0) + '%';
        const metaBar = $('metaBar'); if (metaBar) metaBar.style.width = (d.ratings.meta || 0) + '%';
        const lbBar = $('lbBar'); if (lbBar) lbBar.style.width = ((d.ratings.lb || 0) * 10) + '%';
      } else {
        // fallback compute from DOM values (rare)
        document.querySelectorAll('.review-box .r-row').forEach(row => {
          const valText = row.querySelector('.r-value')?.innerText || '';
          const bar = row.querySelector('.r-fill');
          if (bar) bar.style.width = computePercentFromText(valText) + '%';
        });
      }

      // small content that can be rendered now
      const summaryEl = $('summary'); if (summaryEl) summaryEl.innerHTML = d.summary || '';
      const storyEl = $('story'); if (storyEl) storyEl.innerHTML = d.story || '';
      const detailsEl = $('details'); if (detailsEl) detailsEl.innerHTML = d.details || '';

      // Defer heavy list rendering to idle
      const renderLargeSections = () => {
        // awards
        const grid = $('awardsGrid');
        if (grid) {
          grid.innerHTML = Array.isArray(d.awards) && d.awards.length
            ? d.awards.map(a => `<div class="award-card"><h4>${a.title||''}</h4><p>${a.result||''}</p></div>`).join('')
            : '';
        }

        // trailer
        const trailer = $('trailer'); if (trailer) trailer.src = d.trailer || '';

        // production
        const pGrid = $('productionGrid');
        if (pGrid) {
          pGrid.innerHTML = Array.isArray(d.production) && d.production.length
            ? d.production.map(p => `<div class="award-card"><strong>${p.title||''}</strong><p>${p.value||''}</p></div>`).join('')
            : '';
        }

        // screenshots
        const ss = $('screenshots');
        if (ss) {
          ss.innerHTML = Array.isArray(d.screenshots)
            ? d.screenshots.map(s => `<div class="ss-item"><img src="${s}" loading="lazy" decoding="async" onclick="openSS('${s}')" /></div>`).join('')
            : '';
        }

        // cast
        const castEl = $('castGrid');
        if (castEl) {
          castEl.innerHTML = Array.isArray(d.cast)
            ? d.cast.map(c => `<div class="cast-card"><img src="${c.img||'/assets/thumb/placeholder.png'}" class="cast-img" loading="lazy" decoding="async"><div class="cast-name">${c.name||''}</div><div class="cast-role">${c.role||''}</div></div>`).join('')
            : '';
        }

        // platforms
        const plat = $('platformGrid');
        if (plat) {
          plat.innerHTML = Array.isArray(d.platforms)
            ? d.platforms.map(p => `<div class="platform-item"><img src="${p.logo||'/assets/thumb/placeholder.png'}" class="platform-icon" loading="lazy" decoding="async"><div class="platform-name">${p.name||''}</div></div>`).join('')
            : '';
        }

        // tags
        const tags = $('tagsList');
        if (tags) {
          tags.innerHTML = Array.isArray(d.tags) ? d.tags.map(t => `<span>${t}</span>`).join('') : '';
        }

        // locations
        const loc = $('locationBox');
        if (loc) {
          loc.innerHTML = Array.isArray(d.locations) ? d.locations.map(l => `<div class="loc-item"><div class="loc-title">${l.title||''}</div><div class="loc-sub">${l.sub||''}</div></div>`).join('') : '';
        }

        // timeline
        const tl = $('timeline');
        if (tl) {
          tl.innerHTML = Array.isArray(d.timeline) ? d.timeline.map(t => `<div class="tl-item"><div class="tl-dot"></div><div class="tl-content"><div class="tl-year">${t.year||''}</div><div class="tl-text">${t.text||''}</div></div></div>`).join('') : '';
        }
      };

      if ('requestIdleCallback' in window) {
        requestIdleCallback(renderLargeSections, { timeout: 1000 });
      } else {
        setTimeout(renderLargeSections, 50);
      }

    } catch (err) {
      console.error('john-wick-2.json load error:', err);
    }
  }

  /* ===========================
      INIT SEQUENCE (prioritize LCP)
  =========================== */
  (async function init() {
    // start loading data (parsing deferred inside)
    loadData();

    // render main movie JSON immediately (this updates LCP-critical parts quickly)
    // default path can be changed per page
    try {
      renderMovieJson('json/john-wick-3.json');
    } catch (e) {
      console.error('renderMovieJson init error', e);
    }

    // defer heavy UI: recommendations & sliders to idle (non-blocking)
    const deferredExtras = () => {
      loadMoreMovies().catch(e => console.error('loadMoreMovies error', e));
      loadRecommendations().catch(e => console.error('loadRecommendations error', e));
    };

    if ('requestIdleCallback' in window) {
      requestIdleCallback(deferredExtras, { timeout: 2000 });
    } else {
      setTimeout(deferredExtras, 300);
    }
  })();

  // expose some helpers (kept names)
  window.renderMovieJson = renderMovieJson;
  window.loadData = loadData;
  window.loadMoreMovies = loadMoreMovies;
  window.loadRecommendations = loadRecommendations;

})();
</script>

<script>
window.toggleMore = function(selector) {
  const section = document.querySelector(selector);
  if (!section) return;

  // detect grid
  const grid =
    section.querySelector('.cast-grid') ||
    section.querySelector('.platform-grid');

  if (!grid) return;

  const btn = section.querySelector('.more-btn');
  const expanded = grid.classList.contains('expanded');

  if (expanded) {
    grid.classList.remove('expanded');
    btn.textContent = 'See More';
  } else {
    grid.classList.add('expanded');
    btn.textContent = 'See Less';
  }
};
</script>

<script>
document.addEventListener("click", function(e) {
  if (e.target.matches(".screenshot-scroll img")) {
    const popup = document.getElementById("imgPopup");
    const popupImg = document.getElementById("popupImg");
    popupImg.src = e.target.src;
    popup.style.display = "flex";
  }

  if (e.target.matches(".close-popup") || e.target.id === "imgPopup") {
    document.getElementById("imgPopup").style.display = "none";
  }
});
</script>





<script>
function openTrailerPopup() {
  const mainFrame = document.getElementById("trailer").src;
  const popupFrame = document.getElementById("trailerPopup");

  popupFrame.src = mainFrame; 
  document.getElementById("trailerModal").style.display = "flex";
}

function closeTrailerPopup() {
  document.getElementById("trailerPopup").src = "";
  document.getElementById("trailerModal").style.display = "none";
}
</script>

</body>
</html>
